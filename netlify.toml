[build]
  base = "frontend"
  command = "npm ci && npm run build"
  publish = "dist"

[build.environment]
  # Skip secrets scanning for public VITE_ env vars (they're meant to be embedded in frontend)
  SECRETS_SCAN_OMIT_KEYS = "VITE_API_BASE_URL"

# Redirect all routes to index.html for SPA routing
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# NOTE: Set VITE_API_BASE_URL and any other env vars in the Netlify UI or via CLI/Netlify team settings.
# Example (do NOT commit secrets here):
#[context.production.environment]
#  VITE_API_BASE_URL = "https://api.yourdomain.com/api"
